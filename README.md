# ğŸœ NoodleTimer - ë¼ë©´ íƒ€ì´ë¨¸ ì•±
> **íŒ€ ì •ë³´**: ê°œì¸ í”„ë¡œì íŠ¸
> 
>**í”„ë¡œì íŠ¸ ê¸°ê°„**: 2025.04 ~ 2025.05 (4ì£¼)
> 

## ğŸœ ì„œë¹„ìŠ¤ ì†Œê°œ

ì‚¬ìš©ìê°€ ë¼ë©´ì„ ë“ì¼ ë•Œ í•„ìš”í•œ ì •í™•í•œ ì¡°ë¦¬ ì‹œê°„ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì£¼ëŠ” Flutter ì•±ì…ë‹ˆë‹¤. 

ì„ íƒí•œ ë¼ë©´ì— ë§ëŠ” ìµœì ì˜ ì¡°ë¦¬ ì‹œê°„ì´ ì„¤ì •ë˜ë©°, íƒ€ì´ë¨¸ê°€ ì¢…ë£Œë˜ë©´ ì•Œë¦¼ì„ í†µí•´ ì¡°ë¦¬ ì™„ë£Œë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. 

ì´ ì•±ì„ í†µí•´ ë§¤ë²ˆ ë¼ë©´ ë“ì´ê¸° ì‹œê°„ì„ ê±±ì •í•  í•„ìš” ì—†ì´, ê°„í¸í•˜ê³  ì •í™•í•˜ê²Œ ë¼ë©´ì„ ì™„ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸœ ì£¼ìš” ê¸°ëŠ¥
- **ë§ì¶¤ íƒ€ì´ë¨¸**: ë¼ë©´ë³„ ìµœì í™”ëœ ì¡°ë¦¬ ì‹œê°„ ì œê³µ
- **í•œê¸€ ì´ˆì„± ê²€ìƒ‰**: í•œê¸€ ì´ˆì„± ì¶”ì¶œë¡œ ë¹ ë¥¸ ë¼ë©´ ê²€ìƒ‰ (ã……ã„¹ã… â†’ ì‹ ë¼ë©´)
- **ì¡°ë¦¬ ê¸°ë¡ ê´€ë¦¬**: Firebase ê¸°ë°˜ CRUD ë° ì¡°ë¦¬ ë‚´ì—­ ì¬ì‹¤í–‰ ê¸°ëŠ¥
- **ì¸ì¦ ì‹œìŠ¤í…œ**: Firebase Auth ê¸°ë°˜ íšŒì›ê°€ì…/ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ/ê³„ì •ì‚­ì œ
- **ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”**: Firestore ê¸°ë°˜ ì‹¤ì‹œê°„ ë°ì´í„° ì—°ë™
  
|ìŠ¤í”Œë˜ì‹œ+íšŒì›ê°€ì… | ë¡œê·¸ì¸+ì˜¨ë³´ë”© | í™ˆ+íƒ€ì´ë¨¸ |
|---|---|---|
| <img src="https://github.com/user-attachments/assets/5a03b405-c6e3-494c-b74e-ee4ba9251fc4" width="280" height="520"> | <img src="https://github.com/user-attachments/assets/d346f492-33e4-4dfb-bc1e-0781fcf91c0c" width="280" height="520"> | <img src="https://github.com/user-attachments/assets/85ac16b3-c4b4-47f8-8216-b56e02700fd0" width="280" height="520"> |

| ê²€ìƒ‰+ìƒì„¸ì •ë³´ | ì¡°ë¦¬ë‚´ì—­+ì¬ì‹¤í–‰ | ì¡°ë¦¬ë‚´ì—­+ì‚­ì œ |
|---|---|---|
| <img src="https://github.com/user-attachments/assets/0e8bb458-cb5f-42fc-a5fc-4cb92bf6511f" width="280" height="520"> | <img src="https://github.com/user-attachments/assets/c6fd2c16-83d3-482b-99eb-bf0e45d67e53" width="280" height="520"> | <img src="https://github.com/user-attachments/assets/46a64b0d-a9ed-4592-9b14-043a5f3f8a91" width="280" height="520"> |

## ğŸœ ê°œë°œ í™˜ê²½ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬

| ë¶„ì•¼ | ê¸°ìˆ  | ë²„ì „ | ì‚¬ìš© ëª©ì  |
| --- | --- | --- | --- |
| **Frontend** | Flutter | 3.24.0 | í¬ë¡œìŠ¤ í”Œë«í¼ UI í”„ë ˆì„ì›Œí¬ |
|  | Dart | 3.7.2 | ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ ì–¸ì–´ |
| **Backend** | Firebase Auth | 4.17.3 | ì‚¬ìš©ì ì¸ì¦ ë° ê³„ì • ê´€ë¦¬ |
|  | Cloud Firestore | 4.17.5 | ì‹¤ì‹œê°„ NoSQL ë°ì´í„°ë² ì´ìŠ¤ |
| **State Management** | Riverpod | 2.5.1 | ìƒíƒœ ê´€ë¦¬ ë° ì˜ì¡´ì„± ì£¼ì… |
|  | Shared Preferences | 2.5.3 | ë¡œì»¬ ì„¤ì • ì €ì¥ |
| **Utility** | Intl | 0.18.1 | êµ­ì œí™” ë° ë‚ ì§œ í¬ë§·íŒ… |
| **Testing** | Flutter Test | - | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ |
|  | Mockito | 5.0.16 | ì˜ì¡´ì„± ëª¨í‚¹ |

## ğŸœ í”„ë ˆì„ì›Œí¬ ë° ì•„í‚¤í…ì²˜

> **Clean Architecture**

- **Data Layer**: Repository êµ¬í˜„ì²´, DTO, ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤ ì—°ë™
- **Domain Layer**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, Entity, UseCase, Repository ì¸í„°í˜ì´ìŠ¤
- **Presentation Layer**: UI ë¡œì§, ViewModel, State ê´€ë¦¬

> **MVVM + Riverpod**

- Presentation, Domain, Data ì „ë°˜ì˜ ìƒíƒœ ê´€ë¦¬ë¥¼ Riverpodìœ¼ë¡œ êµ¬í˜„
- ViewModelì—ì„œ ë°”ë€ŒëŠ” ë°ì´í„°ì— ë”°ë¼ UIê°€ ë°˜ì‘í•˜ë„ë¡ Reactive Programming êµ¬í˜„
- ì˜ì¡´ì„± ì£¼ì…ì„ í†µí•œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ ì‘ì„±

> **í”„ë¡œì íŠ¸ êµ¬ì¡°**

```
lib/
â”œâ”€â”€ core/                # í•µì‹¬ ì„¤ì •
â”‚   â”œâ”€â”€ di/              # ì˜ì¡´ì„± ì£¼ì…
â”‚   â”œâ”€â”€ exceptions/      # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â””â”€â”€ logger/          # ë¡œê·¸ ì‹œìŠ¤í…œ
|
â”œâ”€â”€ data/                # ë°ì´í„° ê³„ì¸µ
â”‚   â”œâ”€â”€ repository/      # Repository êµ¬í˜„ì²´
â”‚   â”œâ”€â”€ dto/             # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â””â”€â”€ utils/           # ë°ì´í„° ìœ í‹¸ë¦¬í‹°
|
â”œâ”€â”€ domain/              # ë„ë©”ì¸ ê³„ì¸µ
â”‚   â”œâ”€â”€ entity/          # ì—”í‹°í‹°
â”‚   â”œâ”€â”€ repository/      # Repository ì¸í„°í˜ì´ìŠ¤
â”‚   â””â”€â”€ usecase/         # UseCase
|
â””â”€â”€ presentation/        # í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ
    â”œâ”€â”€ screen/          # í™”ë©´ UI
    â”œâ”€â”€ viewmodel/       # ìƒíƒœ ê´€ë¦¬
    â”œâ”€â”€ state/           # ìƒíƒœ í´ë˜ìŠ¤
    â””â”€â”€ widget/          # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
```

---
## ğŸœ ê°œë°œ ê³¼ì •ì—ì„œ í•´ê²°í•œ ë¬¸ì œë“¤

> **Firestore ë¬¸ì„œ ì‚­ì œ ë¶ˆì¼ì¹˜ í•´ê²°**

**ë¬¸ì œ**: UIì—ì„œëŠ” ì‚­ì œë˜ì§€ë§Œ Firestoreì—ëŠ” ë°ì´í„°ê°€ ë‚¨ì•„ìˆì–´ ì•± ì¬ì‹¤í–‰ ì‹œ ë‹¤ì‹œ ë‚˜íƒ€ë‚˜ëŠ” í˜„ìƒ

**ì›ì¸**: `ramenId`(ë¼ë©´ ê³ ìœ  ID)ì™€ `documentId`(Firestore ë¬¸ì„œ ID)ë¥¼ í˜¼ìš©í•˜ì—¬ ì˜ëª»ëœ IDë¡œ ì‚­ì œ ì‹œë„

**í•´ê²°**: CookHistoryEntityì— ì‹¤ì œ Firestore ë¬¸ì„œ ID í•„ë“œ ì¶”ê°€ ë° ì‚­ì œ ë¡œì§ ìˆ˜ì •

```dart
class CookHistoryEntity {
  final String? id;  // Firestore documentId ì¶”ê°€
  final int ramenId; // ë¼ë©´ ê³ ìœ  IDì™€ ë¶„ë¦¬
}

// Before: ì˜ëª»ëœ ID ì‚¬ìš©
await _db.collection('users').doc(uid).collection('cookHistories')
    .doc(ramenId) // ë¼ë©´ IDë¥¼ ë¬¸ì„œ IDë¡œ ì˜ëª» ì‚¬ìš©
    .delete();

// After: ì‹¤ì œ ë¬¸ì„œ ID ì‚¬ìš©
await _db.collection('users').doc(uid).collection('cookHistories')
    .doc(historyId) // ì‹¤ì œ Firestore ë¬¸ì„œ ID ì‚¬ìš©
    .delete();
```

**ê²°ê³¼**: ë°ì´í„° ì¼ê´€ì„± í™•ë³´, ì¡°ë¦¬ë‚´ì—­ ì‚­ì œ ê¸°ëŠ¥ ì •ìƒ ì‘ë™

---

> **ì´ë¯¸ì§€ ë¡œë”© ë’¤ì„ì„ í˜„ìƒ í•´ê²°**

**ë¬¸ì œ**: ë¸Œëœë“œ íƒ­ ë³€ê²½ ì‹œ ì´ì „ ë¸Œëœë“œì˜ ì´ë¯¸ì§€ê°€ ì ê¹ ë³´ì´ëŠ” ì‹œê°ì  í˜¼ë€ ë°œìƒ

**ì›ì¸**: Flutter ìœ„ì ¯ ì¬ì‚¬ìš© ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ì¸í•´ ë™ì¼í•œ StatefulWidget ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë‹¤ë¥¸ ë°ì´í„° í‘œì‹œ

**í•´ê²°**: ValueKeyë¥¼ í™œìš©í•˜ì—¬ ê° ë¼ë©´ë³„ ê³ ìœ í•œ ìœ„ì ¯ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

```dart
// Before: ìœ„ì ¯ ì¬ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ë¬¸ì œ
return RamenCard(ramen: ramen);

// After: ê³ ìœ  í‚¤ë¡œ ìœ„ì ¯ ë¶„ë¦¬
return RamenCard(
  key: ValueKey('ramen_${ramen.id}'),  // ë¼ë©´ë³„ ê³ ìœ  í‚¤ ì„¤ì •
  ramen: ramen,
);
```

**ê²°ê³¼**: ë¸Œëœë“œ ë³€ê²½ ì‹œ ë¶€ë“œëŸ¬ìš´ UI ì „í™˜, ì´ë¯¸ì§€ ë’¤ì„ì„ ë¬¸ì œ í•´ê²°

---

> **StateNotifier dispose í›„ ì˜ˆì™¸ í•´ê²°**

**ë¬¸ì œ**: ì˜¨ë³´ë”© í™”ë©´ì—ì„œ ë©´ë°œ ì·¨í–¥ ì„ íƒ í›„ `Bad state: Tried to use NoodlePreferenceViewModel after 'dispose' was called` ì˜ˆì™¸ ë°œìƒ

**ì›ì¸**: ë¹„ë™ê¸° Firestore ì—…ë°ì´íŠ¸ ì¤‘ í™”ë©´ ì „í™˜ìœ¼ë¡œ StateNotifierê°€ disposeëœ í›„ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹œë„

**í•´ê²°**: StateNotifierì˜ `mounted` ì†ì„±ì„ í™œìš©í•œ dispose ìƒíƒœ ì²´í¬ ì¶”ê°€

```dart
// Before: dispose í›„ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹œë„
Future updateNoodlePreference(NoodlePreference preference) async {
  await _firestoreService.updateUserNoodlePreference(_userId, preference);
  state = state.copyWith(status: const AsyncValue.data(null)); // ì˜ˆì™¸ ë°œìƒ
}

// After: mounted ì²´í¬ë¡œ ì•ˆì „í•œ ìƒíƒœ ì—…ë°ì´íŠ¸
Future updateNoodlePreference(NoodlePreference preference) async {
  await _firestoreService.updateUserNoodlePreference(_userId, preference);
  
  if (!mounted) return; // dispose ìƒíƒœ ì²´í¬
  state = state.copyWith(status: const AsyncValue.data(null));
}
```

**ê²°ê³¼**: dispose í›„ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜ˆì™¸ ì™„ì „ í•´ê²°, í™”ë©´ ì „í™˜ ì‹œ ì•ˆì •ì ì¸ ë™ì‘

---
